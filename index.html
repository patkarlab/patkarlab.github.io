<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Molecular Hematology Research Group</title>
  <style>
    html, body { margin:0; padding:0; height:100%; }
    /* Put the canvas behind content */
    #nucleotideCanvas {
      position: fixed;
      inset: 0;          /* top:0; right:0; bottom:0; left:0 */
      z-index: -1;       /* behind everything */
      display: block;
    }
    /* Simple centered content */
    .wrap {
      position: relative;
      z-index: 1;        /* ensure on top of canvas */
      min-height: 100vh;
      display: grid;
      place-items: center;
      text-align: center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: rgb(10,30,120);
      padding: 24px;
    }
    h1 { margin: 0 0 6px; font-size: clamp(28px,4.5vw,44px); }
    .sub { margin: 0 0 16px; opacity: .85; }
    p { margin: 8px 0; font-size: clamp(15px,2vw,19px); line-height: 1.5; }
  </style>
</head>
<body>
  <!-- Your exact canvas -->
  <canvas id="nucleotideCanvas"></canvas>

  <!-- Foreground text -->
  <main class="wrap">
    <div>
      <h1>Molecular Hematology Research Group</h1>
      <div class="sub">ACTREC, Tata Memorial Centre</div>
      <p>As a research group, we focus on acute leukemia and other blood cancers with the goal to translate these discoveries into the clinic.</p>
    </div>
  </main>

  <!-- Your exact script, unchanged -->
  <script>
  const canvas = document.getElementById("nucleotideCanvas");
  const ctx = canvas.getContext("2d");

  // === Controls you can tweak ===
  const SPEED_FACTOR = 0.5;     // overall fall speed (lower = slower)
  const LIFETIME_MS  = 2800;    // trail lifetime
  const MUT_RATE     = 0.03;    // mutation chance
  const COL_WIDTH    = 24;      // wider columns also help readability
  const ROW_SCALE_MIN = 1.25;   // vertical spacing = fontSize * random scale
  const ROW_SCALE_MAX = 1.6;    // increase these to spread letters out more

  // HiDPI crispness
  function resizeCanvas() {
    const dpr = window.devicePixelRatio || 1;
    canvas.style.width = window.innerWidth + "px";
    canvas.style.height = window.innerHeight + "px";
    canvas.width = Math.floor(window.innerWidth * dpr);
    canvas.height = Math.floor(window.innerHeight * dpr);
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  }
  resizeCanvas();

  const bases = ["A","T","G","C"];
  let columns = [];

  function rand(a,b){ return a + Math.random()*(b-a); }

  function newColumn(i) {
    const fontSize = 16 + Math.random() * 24; // 16â€“40px
    const rowScale = rand(ROW_SCALE_MIN, ROW_SCALE_MAX);
    return {
      x: i * COL_WIDTH + Math.floor(COL_WIDTH * 0.5),
      y: Math.random() * window.innerHeight,
      speed: (0.9 + Math.random() * 1.4) * SPEED_FACTOR,
      fontSize,
      rowStep: fontSize * rowScale,  // << vertical spacing between letters
      depth: 0.7 + Math.random() * 1.1,
      lastEmitY: 0,
      trail: []
    };
  }

  function rebuildColumns() {
    const count = Math.max(1, Math.floor(window.innerWidth / COL_WIDTH));
    columns = new Array(count).fill(0).map((_, i) => {
      const c = newColumn(i);
      c.lastEmitY = c.y; // initialize so first emit waits for rowStep
      return c;
    });
  }
  rebuildColumns();

  // easing for fade
  const easeOutQuad = t => 1 - (1 - t) * (1 - t);

  function draw(now) {
    // white background
    ctx.globalAlpha = 1;
    ctx.fillStyle = "#ffffff";
    ctx.fillRect(0, 0, window.innerWidth, window.innerHeight);

    columns.forEach((col, idx) => {
      // move the head
      col.y += col.speed * col.depth;

      // emit only when we've moved by at least one row step
      while (col.y - col.lastEmitY >= col.rowStep) {
        col.lastEmitY += col.rowStep;

        const char = bases[(Math.random() * bases.length) | 0];
        const isMut = Math.random() < MUT_RATE;

        col.trail.push({
          x: col.x,
          y: col.lastEmitY,
          char,
          color: isMut ? "#D80000" : "rgb(10,30,120)",
          size: col.fontSize,
          born: now
        });
      }

      // recycle column
      if (col.y > window.innerHeight + col.rowStep) {
        const next = newColumn(idx);
        next.y = 0;
        next.lastEmitY = -next.rowStep; // start emitting just above the top
        columns[idx] = next;
        col = next;
      }

      // render + prune trail
      const alive = [];
      for (let i = 0; i < col.trail.length; i++) {
        const g = col.trail[i];
        const age = now - g.born;
        if (age <= LIFETIME_MS) {
          const t = age / LIFETIME_MS;
          const alpha = 1 - easeOutQuad(t);

          ctx.globalAlpha = alpha;
          ctx.shadowColor = g.color;
          ctx.shadowBlur = Math.max(0, (g.size - 16) * 0.2);

          ctx.font = `${g.size}px monospace`;
          ctx.fillStyle = g.color;
          ctx.fillText(g.char, g.x, g.y);

          alive.push(g);
        }
      }
      col.trail = alive;
    });

    ctx.globalAlpha = 1;
    ctx.shadowBlur = 0;
    requestAnimationFrame(draw);
  }
  requestAnimationFrame(draw);

  window.addEventListener("resize", () => {
    resizeCanvas();
    rebuildColumns();
  });
  </script>
</body>
</html>
